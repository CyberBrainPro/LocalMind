import{_ as L,a as i,k as b,p as j,o as B,c as p,b as e,l as y,t as d,w as F,v as P,d as M,F as S,e as T,h as _,j as E}from"./plugin-vue_export-helper.ed441a23.js";const O={id:"app"},z={class:"header"},J={class:"header-right"},U={class:"vector-main"},q={class:"panel"},G={class:"panel-header"},H=["disabled"],K={class:"panel-desc"},Q={class:"control-row"},R={class:"control-label"},W={class:"table-wrapper"},X={key:0},Y={colspan:"3"},Z={"data-label":"ID"},ee={"data-label":"Document",class:"doc"},te={"data-label":"Metadata",class:"metadata"},ae={class:"pagination"},se=["disabled"],le={key:0,class:"page-info"},ne=["disabled"],oe={__name:"VectorsApp",setup(ie){const n=i([]),u=i(0),l=i(20),a=i(0),c=i(!1),h=i("\u52A0\u8F7D\u4E2D..."),r=i("\u52A0\u8F7D\u4E2D..."),f=async()=>{var t,o,g;if(c.value)return;c.value=!0,r.value="\u52A0\u8F7D\u4E2D...",n.value=[];const s=Number.isFinite(l.value)?l.value:20;l.value=Math.min(Math.max(s,1),200);try{const v=await fetch(`/api/vector-store?limit=${l.value}&offset=${a.value}`);if(!v.ok)throw new Error(`\u8BF7\u6C42\u5931\u8D25: ${v.status}`);const m=await v.json();if(u.value=(t=m.total)!=null?t:0,l.value=(o=m.limit)!=null?o:l.value,a.value=(g=m.offset)!=null?g:a.value,n.value=m.items||[],!n.value.length)r.value="\u5411\u91CF\u5E93\u4E3A\u7A7A\uFF0C\u5C1A\u672A\u5BFC\u5165\u5185\u5BB9\u3002",h.value=r.value;else{const A=a.value+1,C=Math.min(a.value+n.value.length,u.value);h.value=`\u5C55\u793A\u7B2C ${A} - ${C} \u6761\uFF0C\u5171 ${u.value} \u6761\u8BB0\u5F55`,r.value=""}}catch(v){console.error(v),r.value=`\u52A0\u8F7D\u5931\u8D25\uFF1A${v.message}`,h.value="\u65E0\u6CD5\u52A0\u8F7D\u5411\u91CF\u6570\u636E\u3002"}finally{c.value=!1}},k=()=>{a.value=0,f()},w=()=>{a.value<=0||(a.value=Math.max(0,a.value-l.value),f())},x=()=>{const s=a.value+l.value;s>=u.value||(a.value=s,f())},V=s=>{if(!s)return"";const t=String(s);return t.length>400?`${t.slice(0,400)}...`:t},$=s=>{if(!s||typeof s!="object")return"";try{return JSON.stringify(s,null,2)}catch{return"Invalid metadata"}},D=b(()=>a.value>0),N=b(()=>a.value+l.value<u.value),I=b(()=>{if(!n.value.length)return"";const s=a.value+1,t=Math.min(a.value+n.value.length,u.value);return`\u7B2C ${s} - ${t} \u6761`});return j(()=>l.value,(s,t)=>{s!==t&&(c.value||(a.value=0))}),B(()=>{f()}),(s,t)=>(_(),p("div",O,[e("div",z,[t[6]||(t[6]=e("div",{class:"brand"},[e("div",{class:"logo"},"LM"),e("div",null,[e("div",{class:"title"},"LocalMind Vectors"),e("div",{class:"subtitle"},"\u5411\u91CF\u6570\u636E\u5E93\u9884\u89C8")])],-1)),e("div",J,[t[2]||(t[2]=e("div",{class:"status-dot"},null,-1)),e("span",null,[t[1]||(t[1]=y("\u603B\u8BB0\u5F55\uFF1A",-1)),e("span",null,d(u.value),1)]),t[3]||(t[3]=e("span",{class:"badge"},"Vectors",-1)),t[4]||(t[4]=e("a",{class:"nav-link",href:"/admin"},"\u8FD4\u56DE\u7BA1\u7406",-1)),t[5]||(t[5]=e("a",{class:"nav-link",href:"/chat"},"\u524D\u5F80\u5BF9\u8BDD",-1))])]),e("div",U,[e("div",q,[e("div",G,[t[7]||(t[7]=e("div",null,[e("div",{class:"panel-title"},"\u5411\u91CF\u5B58\u50A8\u5185\u5BB9"),e("div",{class:"panel-desc"},"\u67E5\u770B\u5DF2\u5BFC\u5165\u7684\u6587\u672C\u7247\u6BB5\u53CA\u5176\u5143\u6570\u636E\uFF0C\u652F\u6301\u5206\u9875\u6D4F\u89C8\u3002")],-1)),e("button",{class:"btn",onClick:k,disabled:c.value},"\u5237\u65B0",8,H)]),e("div",K,d(h.value),1),e("div",Q,[e("label",R,[t[8]||(t[8]=y(" \u6BCF\u9875\u6761\u6570 ",-1)),F(e("input",{type:"number",min:"1",max:"200","onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o)},null,512),[[P,l.value,void 0,{number:!0}]])])]),e("div",W,[e("table",null,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{style:{width:"20%"}},"ID"),e("th",{style:{width:"45%"}},"Document"),e("th",{style:{width:"35%"}},"Metadata")])],-1)),e("tbody",null,[n.value.length?M("",!0):(_(),p("tr",X,[e("td",Y,d(r.value),1)])),(_(!0),p(S,null,T(n.value,o=>(_(),p("tr",{key:o.id},[e("td",Z,d(o.id),1),e("td",ee,d(V(o.document)),1),e("td",te,d($(o.metadata)),1)]))),128))])])]),e("div",ae,[e("button",{class:"btn",onClick:w,disabled:!D.value},"\u4E0A\u4E00\u9875",8,se),n.value.length?(_(),p("span",le,d(I.value),1)):M("",!0),e("button",{class:"btn",onClick:x,disabled:!N.value},"\u4E0B\u4E00\u9875",8,ne)])])])]))}};var ue=L(oe,[["__scopeId","data-v-0b34d574"]]);E(ue).mount("#app");
