import{_ as O,a as d,l as k,q as P,o as T,c as u,b as e,m as $,t as o,w as E,v as q,F as z,e as J,d as x,h as U,i as r,k as G}from"./plugin-vue_export-helper.898ebc61.js";const H={class:"app-shell"},K={class:"shell-header"},Q={class:"header-right"},R={class:"shell-body"},W={class:"panel"},X={class:"panel-header"},Y=["disabled"],Z={class:"panel-desc"},ee={class:"control-row"},te={class:"control-label"},se={class:"list-wrapper"},ae={key:0,class:"empty-tip"},le={key:1,class:"vector-list"},ne={class:"card-header"},oe={class:"card-id",title:"\u5411\u91CF ID"},ie=["onClick"],de={class:"card-snippet"},ce={class:"card-meta"},ve={class:"pagination"},ue=["disabled"],re={key:0,class:"page-info"},_e=["disabled"],pe={key:0,class:"detail-overlay"},fe={class:"detail-modal"},he={class:"detail-content"},be={class:"detail-section"},me={class:"detail-value"},ge={class:"detail-section"},ye={class:"detail-value detail-text"},ke={class:"detail-section"},$e={class:"detail-pre"},xe={__name:"VectorsApp",setup(Ve){const i=d([]),c=d(0),n=d(20),a=d(0),b=d(!1),m=d("\u52A0\u8F7D\u4E2D..."),_=d("\u52A0\u8F7D\u4E2D..."),p=d(null),y=d(!1),f=async()=>{var t,l,v;if(b.value){y.value=!0;return}b.value=!0,_.value="\u52A0\u8F7D\u4E2D...",i.value=[];const s=Number.isFinite(n.value)?n.value:20;n.value=Math.min(Math.max(s,1),200);try{const h=await fetch(`/api/vector-store?limit=${n.value}&offset=${a.value}`);if(!h.ok)throw new Error(`\u8BF7\u6C42\u5931\u8D25: ${h.status}`);const g=await h.json();if(c.value=(t=g.total)!=null?t:0,n.value=(l=g.limit)!=null?l:n.value,a.value=(v=g.offset)!=null?v:a.value,i.value=g.items||[],!i.value.length)_.value="\u5411\u91CF\u5E93\u4E3A\u7A7A\uFF0C\u5C1A\u672A\u5BFC\u5165\u5185\u5BB9\u3002",m.value=_.value;else{const F=a.value+1,B=Math.min(a.value+i.value.length,c.value);m.value=`\u5C55\u793A\u7B2C ${F} - ${B} \u6761\uFF0C\u5171 ${c.value} \u6761\u8BB0\u5F55`,_.value=""}}catch(h){console.error(h),_.value=`\u52A0\u8F7D\u5931\u8D25\uFF1A${h.message}`,m.value="\u65E0\u6CD5\u52A0\u8F7D\u5411\u91CF\u6570\u636E\u3002"}finally{b.value=!1,y.value&&(y.value=!1,f())}},M=()=>{a.value=0,f()},V=()=>{a.value<=0||(a.value=Math.max(0,a.value-n.value),f())},w=()=>{const s=a.value+n.value;s>=c.value||(a.value=s,f())},C=s=>{if(!s)return"";const t=String(s);return t.length>200?`${t.slice(0,200)}...`:t},D=s=>{if(!s||typeof s!="object")return"";try{return JSON.stringify(s,null,2)}catch{return"Invalid metadata"}},N=s=>{if(!s||typeof s!="object")return"\u65E0\u5143\u6570\u636E";if(s.file_name||s.folder_name){const l=s.folder_name||"\u672A\u77E5\u6587\u4EF6\u5939",v=s.file_name||s.doc_id||"\u672A\u77E5\u6587\u4EF6";return`${l} \xB7 ${v}`}const t=Object.entries(s).slice(0,3);return t.length?t.map(([l,v])=>`${l}: ${v}`).join(" \xB7 "):"\u65E0\u5143\u6570\u636E"},I=s=>{p.value=s},j=()=>{p.value=null},A=k(()=>a.value>0),L=k(()=>a.value+n.value<c.value),S=k(()=>{if(!i.value.length)return"";const s=a.value+1,t=Math.min(a.value+i.value.length,c.value);return`\u7B2C ${s} - ${t} \u6761`});return P(()=>n.value,(s,t)=>{s!==t&&(a.value=0,f())}),T(()=>{f()}),(s,t)=>(r(),u("div",H,[e("div",K,[t[6]||(t[6]=e("div",{class:"brand"},[e("div",{class:"logo"},"LM"),e("div",null,[e("div",{class:"title"},"LocalMind Vectors"),e("div",{class:"subtitle"},"\u5411\u91CF\u6570\u636E\u5E93\u9884\u89C8")])],-1)),e("div",Q,[t[2]||(t[2]=e("div",{class:"status-dot"},null,-1)),e("span",null,[t[1]||(t[1]=$("\u603B\u8BB0\u5F55\uFF1A",-1)),e("span",null,o(c.value),1)]),t[3]||(t[3]=e("span",{class:"badge"},"Vectors",-1)),t[4]||(t[4]=e("a",{class:"nav-link",href:"/admin"},"\u8FD4\u56DE\u7BA1\u7406",-1)),t[5]||(t[5]=e("a",{class:"nav-link",href:"/chat"},"\u524D\u5F80\u5BF9\u8BDD",-1))])]),e("div",R,[e("div",W,[e("div",X,[t[7]||(t[7]=e("div",null,[e("div",{class:"panel-title"},"\u5411\u91CF\u5B58\u50A8\u5185\u5BB9"),e("div",{class:"panel-desc"},"\u67E5\u770B\u5DF2\u5BFC\u5165\u7684\u6587\u672C\u7247\u6BB5\u53CA\u5176\u5143\u6570\u636E\uFF0C\u652F\u6301\u5206\u9875\u6D4F\u89C8\u3002")],-1)),e("button",{class:"btn",onClick:M,disabled:b.value},"\u5237\u65B0",8,Y)]),e("div",Z,o(m.value),1),e("div",ee,[e("label",te,[t[8]||(t[8]=$(" \u6BCF\u9875\u6761\u6570 ",-1)),E(e("input",{type:"number",min:"1",max:"200","onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l)},null,512),[[q,n.value,void 0,{number:!0}]])])]),e("div",se,[i.value.length?(r(),u("div",le,[(r(!0),u(z,null,J(i.value,l=>(r(),u("div",{key:l.id,class:"vector-card"},[e("div",ne,[e("div",oe,o(l.id),1),e("button",{class:"btn btn-light",onClick:v=>I(l)},"\u67E5\u770B\u8BE6\u60C5",8,ie)]),e("div",de,o(C(l.document)),1),e("div",ce,o(N(l.metadata)),1)]))),128))])):(r(),u("div",ae,o(_.value),1))]),e("div",ve,[e("button",{class:"btn",onClick:V,disabled:!A.value},"\u4E0A\u4E00\u9875",8,ue),i.value.length?(r(),u("span",re,o(S.value),1)):x("",!0),e("button",{class:"btn",onClick:w,disabled:!L.value},"\u4E0B\u4E00\u9875",8,_e)])])]),t[12]||(t[12]=U('<div class="shell-footer" data-v-1c399b12><div class="footer-left" data-v-1c399b12><span data-v-1c399b12>LocalMind \xB7 \u5411\u91CF\u6570\u636E\u6D4F\u89C8</span><span data-v-1c399b12>\u4EC5\u5217\u8868\u533A\u57DF\u6EDA\u52A8\uFF0C\u4FBF\u4E8E\u7A33\u5B9A\u67E5\u770B</span></div><div class="footer-links" data-v-1c399b12><a href="/admin" data-v-1c399b12>Admin</a><a href="/chat" data-v-1c399b12>Chat</a></div></div>',1)),p.value?(r(),u("div",pe,[e("div",fe,[e("button",{class:"detail-close",onClick:j},"\xD7"),e("div",he,[e("div",be,[t[9]||(t[9]=e("div",{class:"detail-label"},"ID",-1)),e("div",me,o(p.value.id),1)]),e("div",ge,[t[10]||(t[10]=e("div",{class:"detail-label"},"Document",-1)),e("div",ye,o(p.value.document),1)]),e("div",ke,[t[11]||(t[11]=e("div",{class:"detail-label"},"Metadata",-1)),e("pre",$e,o(D(p.value.metadata)),1)])])])])):x("",!0)]))}};var Me=O(xe,[["__scopeId","data-v-1c399b12"]]);G(Me).mount("#app");
